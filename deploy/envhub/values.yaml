# Default values for envhub.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

name: envhub


metadata:
  namespace: aenv

# Namespace configuration
namespace:
  # Set to true to automatically create the namespace
  create: true
  # Optional labels to add to the namespace
  labels: {}
  # Optional annotations to add to the namespace
  annotations: {}

image: docker.io/library/envhub:latest

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""


podAnnotations: {}

podSecurityContext: {}
  # fsGroup: 2000

securityContext: {}

service:
  type: LoadBalancer
  port: 8083
  metricsPort: 9091

serviceAccountName: default

resources:
   limits:
     cpu: "2"
     memory: "4G"
     ephemeral-storage: 10Gi
   requests:
     cpu: "0"
     memory: "0"
     ephemeral-storage: 10Gi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 4
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: {}

# Redis Configuration
redis:
  # Connection mode: "direct" or "sentinel"
  # - "direct": Connect directly to Redis master (use addr)
  # - "sentinel": Use Sentinel mode for high availability (use sentinelAddrs and masterName)
  mode: "sentinel"  # Default: "sentinel" for high availability
  
  # Direct connection mode: Redis connection address (service name or full FQDN)
  # Only used when mode is "direct"
  addr: "redis.aenv.svc.cluster.local:6379"
  
  # Sentinel mode: Number of Sentinel replicas (used to auto-generate sentinelAddrs)
  # Should match redis.sentinel.replicaCount in redis/values.yaml (default: 3)
  sentinelReplicaCount: 3
  # Sentinel mode: Comma-separated list of Sentinel addresses
  # If empty, will auto-generate based on sentinelReplicaCount
  # Format: "redis-sentinel-0.redis-sentinel-headless.aenv.svc.cluster.local:26379,redis-sentinel-1..."
  # Or use Service: "redis-sentinel.aenv.svc.cluster.local:26379" (simpler, auto-load-balanced)
  sentinelAddrs: ""  # Leave empty to auto-generate based on sentinelReplicaCount
  # Sentinel mode: Master name (default: "mymaster" for Bitnami Redis Chart)
  masterName: "mymaster"
  
  # Redis key prefix for env data
  keyPrefix: "env"
  # Redis username (optional, leave empty if not using auth)
  username: ""
  # Redis password (optional, leave empty if not using auth)
  password: ""
  # Redis DB index (default: 0)
  db: 0

# OSS Configuration
oss:
  endpoint: ""  # OSS endpoint, e.g., "http://oss-cn-hangzhou.aliyuncs.com"
  bucket: ""    # OSS bucket name, e.g., "your-bucket-name"
  keyPrefix: ""  # Key prefix for OSS objects
  region: ""  # OSS regionï¼Œ e.g. "cn-hangzhou"
  # Access credentials are loaded from secret (OSS_ACCESS_KEY_ID and OSS_ACCESS_KEY_SECRET)
  # or from environment variables
